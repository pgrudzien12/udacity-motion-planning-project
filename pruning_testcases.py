import time


path_0 = [(0,0), (1,1), (2,2), (3,3), (4,4), (5,5)]
path_1 = [(0,0), (1,1), (2,2), (3,3), (4,4), (5,6)]
path_2 = [(0,0), (1,1), (2,2), (3,3), (4,4), (5,6), (10,10), (11,10)]
path_3 = [(0,0), (1,0), (1,1)]
path_4 = [(0,0), (1,0), (1,1), (2,1), (2,2)]
path_5 = [(0,0), (1,0), (2,0), (3,0), (4,0), (5,0), (5,1), (5,2), (5,3), (5,4), (5,5)]
path_6 = [(0,0), (1,1), (2,2), (3,3), (4,4)]

test_0 = [(316, 445), (315, 445), (314, 445), (313, 445), (312, 446), (311, 447), (310, 448), (309, 449), (308, 450), (307, 451), (306, 452), (305, 453), (304, 454), (303, 455), (302, 455), (301, 455), (300, 455), (299, 455), (298, 455), (297, 455), (296, 455), (295, 456), (294, 457), (293, 458), (292, 459), (291, 460), (290, 461), (289, 462), (288, 463), (287, 464), (286, 465), (285, 466), (284, 467), (283, 468), (282, 469), (281, 470), (280, 471), (279, 472), (278, 473), (277, 474), (276, 475), (275, 476), (274, 477), (273, 478), (272, 479), (271, 480), (270, 481), (269, 482), (268, 483), (267, 484), (266, 485), (265, 486), (264, 487), (263, 488), (262, 489), (261, 490), (260, 491), (259, 492), (258, 493), (257, 494), (256, 495), (255, 496), (254, 496), (253, 496), (252, 496), (251, 496), (250, 496), (249, 496), (248, 496), (247, 496), (246, 496), (245, 496), (244, 496), (243, 496), (242, 496), (241, 496), (240, 496), (239, 496), (238, 496), (237, 496), (236, 496), (235, 496), (234, 495), (233, 494), (232, 494), (231, 493), (230, 493), (229, 493), (228, 492), (227, 492), (226, 491), (225, 491), (224, 490), (223, 490), (222, 489), (221, 489), (220, 488), (219, 488), (218, 488), (217, 487), (216, 487), (215, 486), (214, 486), (213, 485), (212, 485), (211, 484), (210, 484), (209, 483), (208, 483), (207, 483), (206, 482), (205, 482), (204, 481), (203, 481), (202, 480), (201, 480), (200, 479), (199, 478), (198, 477), (197, 476), (196, 475), (195, 474), (194, 474), (193, 474), (192, 474), (191, 474), (190, 474), (189, 474), (188, 474), (187, 473), (186, 473)]
test_1 = [(632, 889), (633, 888), (634, 887), (635, 886), (636, 885), (637, 884), (638, 883), (639, 882), (640, 881), (641, 880), (642, 879), (643, 878), (644, 877), (645, 876), (646, 875), (647, 874), (648, 873), (649, 872), (650, 871), (651, 870), (652, 869), (653, 868), (654, 867), (655, 866), (656, 865), (657, 864), (658, 863), (659, 862), (660, 861), (661, 860), (662, 859), (663, 858), (664, 857), (665, 856), (666, 855), (667, 854), (668, 853), (669, 852), (670, 851), (671, 850), (672, 849), (673, 848), (674, 847), (675, 846), (676, 845), (677, 844), (678, 843), (679, 842), (680, 841), (681, 840), (682, 839), (683, 838), (684, 837), (685, 836), (686, 835), (687, 834), (688, 833), (689, 832), (690, 831), (691, 830), (692, 829), (693, 828), (694, 827), (695, 826), (696, 825), (697, 824), (698, 823), (699, 822), (700, 821), (701, 820), (702, 819), (703, 818), (704, 817), (705, 816), (706, 815), (707, 814), (708, 813), (709, 812), (710, 811), (711, 810), (712, 809), (713, 808), (714, 807), (715, 806), (716, 805), (717, 805), (718, 805), (719, 805), (720, 805), (721, 805), (722, 805), (723, 805), (724, 805), (725, 804), (726, 803), (727, 802), (728, 801), (729, 800), (730, 799), (731, 798), (732, 797), (733, 796), (734, 795), (735, 794), (736, 793), (737, 792), (738, 791), (739, 790), (740, 789), (741, 788), (742, 787), (743, 786), (744, 785), (745, 784), (746, 783), (747, 782), (748, 781), (749, 780), (750, 779), (751, 778), (752, 777), (753, 776), (754, 775), (755, 774), (756, 773), (757, 772), (758, 771), (759, 770), (760, 769), (761, 768), (762, 767), (763, 766), (764, 765), (765, 764), (766, 763), (767, 762), (768, 761), (769, 760), (770, 759), (771, 758), (772, 757), (773, 756), (774, 755), (775, 754), (776, 753), (777, 752), (778, 751), (779, 750), (780, 749), (781, 748), (782, 747), (783, 746), (784, 745), (785, 744), (786, 743), (787, 742), (788, 741), (789, 740), (790, 739), (791, 738), (792, 737), (793, 736), (794, 735), (795, 734), (796, 733), (797, 732), (798, 731), (799, 730), (800, 729), (801, 728), (802, 727), (803, 726), (804, 725), (805, 724), (806, 723), (807, 722), (808, 721), (809, 720), (810, 719), (811, 718), (812, 717), (813, 716), (814, 715), (815, 714), (816, 714), (817, 713), (818, 712), (819, 711), (820, 710), (821, 709), (822, 708), (823, 707), (824, 706), (825, 705), (826, 704), (827, 703), (828, 702), (829, 701), (830, 700), (831, 699), (832, 698), (833, 697), (834, 696), (835, 696), (836, 695), (837, 694), (838, 693), (839, 692), (840, 691), (841, 690), (842, 689), (843, 688), (844, 687), (845, 686), (846, 685), (847, 684), (848, 683), (849, 682), (850, 681), (851, 680), (852, 679), (853, 678), (854, 677), (855, 676), (856, 675), (857, 674), (858, 673), (859, 672), (860, 671), (861, 671), (862, 670), (863, 669), (864, 668), (865, 667), (866, 666), (867, 665), (868, 664), (869, 663), (870, 662), (871, 661), (872, 660), (872, 659), (872, 658), (872, 657), (872, 656), (872, 655), (872, 654), (872, 653), (872, 652), (873, 651), (874, 650), (875, 649), (875, 648), (875, 647), (875, 646), (875, 645), (875, 644), (876, 643), (877, 642), (878, 641), (879, 640), (880, 639), (880, 638), (880, 637), (880, 636), (880, 635), (880, 634), (880, 633), (880, 632), (880, 631), (880, 630), (880, 629), (880, 628), (880, 627), (880, 626), (879, 625), (878, 624), (877, 623), (876, 622), (875, 621), (874, 620), (874, 619), (874, 618), (874, 617), (874, 616), (874, 615), (874, 614), (874, 613), (874, 612), (874, 611), (874, 610), (874, 609), (874, 608), (874, 607), (874, 606), (874, 605), (874, 604), (874, 603), (873, 602), (872, 601), (872, 600), (872, 599), (872, 598), (872, 597), (872, 596), (872, 595), (872, 594), (872, 593), (872, 592), (872, 591), (872, 590), (872, 589), (872, 588), (872, 587), (872, 586), (872, 585), (872, 584), (872, 583), (872, 582), (872, 581), (872, 580), (872, 579), (872, 578), (872, 577), (872, 576), (872, 575), (872, 574), (872, 573), (872, 572), (872, 571), (872, 570), (872, 569), (872, 568), (872, 567), (872, 566), (872, 565), (871, 564), (870, 563), (869, 562), (868, 561), (867, 560), (866, 559), (865, 558), (864, 557), (863, 556), (862, 555), (862, 554), (862, 553), (862, 552), (862, 551), (862, 550), (862, 549), (862, 548), (862, 547), (862, 546), (862, 545), (862, 544), (862, 543), (862, 542), (862, 541), (862, 540), (862, 539), (862, 538), (861, 537), (860, 536), (859, 535), (858, 534), (857, 533), (856, 532), (855, 531), (854, 530), (853, 529), (852, 528), (851, 527), (850, 526), (849, 525), (848, 524), (847, 523), (846, 522), (845, 521), (844, 520), (843, 519), (842, 518), (841, 517), (840, 516), (839, 515), (839, 514), (839, 513), (839, 512), (839, 511), (839, 510), (839, 509), (839, 508), (839, 507), (839, 506), (839, 505), (839, 504), (839, 503), (839, 502), (839, 501), (839, 500), (839, 499), (839, 498), (839, 497), (839, 496), (839, 495), (839, 494), (839, 493), (839, 492), (839, 491), (839, 490), (839, 489), (839, 488), (839, 487), (839, 486), (839, 485), (839, 484), (839, 483), (839, 482), (839, 481), (839, 480), (839, 479), (839, 478), (839, 477), (839, 476), (839, 475), (839, 474), (839, 473), (839, 472), (839, 471), (839, 470), (839, 469), (839, 468), (839, 467), (839, 466), (839, 465), (839, 464), (839, 463), (839, 462), (839, 461), (839, 460), (839, 459), (839, 458), (839, 457), (839, 456), (839, 455), (839, 454), (839, 453), (839, 452), (839, 451), (839, 450), (839, 449), (839, 448), (839, 447), (839, 446), (839, 445), (839, 444), (839, 443), (839, 442), (839, 441), (839, 440), (839, 439), (839, 438), (839, 437), (839, 436), (839, 435), (839, 434), (839, 433), (839, 432), (839, 431), (839, 430), (839, 429), (839, 428), (839, 427), (839, 426), (838, 425), (838, 424), (838, 423), (838, 422), (838, 421), (838, 420), (838, 419), (838, 418), (838, 417), (838, 416), (838, 415), (838, 414), (838, 413), (838, 412), (838, 411), (838, 410), (838, 409), (838, 408), (838, 407), (838, 406), (838, 405), (838, 404), (838, 403), (838, 402), (838, 401), (838, 400), (838, 399), (838, 398), (838, 397), (838, 396), (838, 395), (838, 394), (838, 393), (838, 392), (838, 391), (838, 390), (838, 389), (838, 388), (838, 387), (838, 386), (838, 385), (838, 384), (838, 383), (838, 382), (838, 381), (838, 380), (838, 379), (838, 378), (838, 377), (838, 376), (838, 375), (838, 374), (838, 373), (838, 372), (838, 371), (838, 370), (838, 369), (837, 368), (836, 368), (835, 368), (834, 368), (833, 368), (832, 367), (831, 367), (830, 366), (829, 366), (828, 366), (827, 365), (826, 365), (825, 364), (824, 364), (823, 363), (822, 363), (821, 362), (820, 362), (819, 361), (818, 361), (817, 361), (816, 360), (815, 360), (814, 359), (813, 359), (812, 358), (811, 358), (810, 357), (809, 357), (808, 356), (807, 356), (806, 356), (805, 356), (804, 356), (803, 356), (802, 356), (801, 356), (800, 356), (799, 356), (798, 356), (797, 356), (796, 356), (795, 356), (794, 356), (793, 356), (792, 356), (791, 356), (790, 356), (789, 356), (788, 356), (787, 356), (786, 356), (785, 356), (784, 356), (783, 356), (782, 356), (781, 356), (780, 356), (779, 356), (778, 356), (777, 356), (776, 356), (775, 356), (774, 356), (773, 356), (772, 356), (771, 356), (770, 356), (769, 356), (768, 356), (767, 356), (766, 356), (765, 356), (764, 356), (763, 356), (762, 356), (761, 356), (760, 356), (759, 356), (758, 356), (757, 356), (756, 356), (755, 356), (754, 355), (753, 354), (752, 353), (751, 352), (750, 351), (749, 350), (748, 349), (747, 348), (746, 347), (745, 346), (744, 346), (743, 346), (742, 346), (741, 346), (740, 346), (739, 346), (738, 346), (737, 346), (736, 346), (735, 346), (734, 345), (733, 344), (732, 343), (731, 342), (730, 341), (729, 340), (728, 339), (727, 338), (726, 337), (725, 336), (724, 335), (723, 334), (722, 333), (721, 332), (720, 331), (719, 330), (718, 329), (717, 328), (716, 327), (715, 326), (714, 325), (713, 324), (712, 323), (711, 322), (710, 321), (709, 320), (708, 319), (707, 318), (706, 317), (705, 316), (704, 315), (703, 314), (702, 313), (701, 312), (700, 311), (699, 310), (698, 309), (697, 308), (696, 307), (696, 306), (696, 305), (696, 304), (696, 303), (696, 302), (696, 301), (696, 300), (696, 299), (696, 298), (696, 297), (696, 296), (696, 295), (695, 294), (694, 293), (693, 292), (692, 291), (691, 290), (690, 289), (689, 288), (688, 287), (687, 286), (686, 285), (686, 284), (686, 283), (686, 282), (686, 281), (686, 280), (686, 279), (686, 278), (686, 277), (686, 276), (686, 275), (685, 274), (684, 274), (683, 274), (682, 274), (681, 274), (680, 274), (679, 274), (678, 274), (677, 274), (676, 274), (675, 274), (674, 274), (673, 274), (672, 274), (671, 274), (670, 274), (669, 274), (668, 274), (667, 274), (666, 274), (665, 274), (664, 274), (663, 274), (662, 274), (661, 274), (660, 274), (659, 274), (658, 274), (657, 274), (656, 274), (655, 274), (654, 274), (653, 274), (652, 274), (651, 274), (650, 274), (649, 274), (648, 274), (647, 274), (646, 274), (645, 274), (644, 274), (643, 274), (642, 274), (641, 274), (640, 274), (639, 274), (638, 274), (637, 274), (636, 274), (635, 274), (634, 274), (633, 274), (632, 274), (631, 274), (630, 274), (629, 274), (628, 274), (627, 274), (626, 274), (625, 274), (624, 274), (623, 274), (622, 274), (621, 274), (620, 274), (619, 274), (618, 274), (617, 274), (616, 274), (615, 274), (614, 274), (613, 274), (612, 274), (611, 274), (610, 274), (609, 274), (608, 274), (607, 274), (606, 274), (605, 274), (604, 274), (603, 274), (602, 274), (601, 274), (600, 274), (599, 274), (598, 274), (597, 274), (596, 274), (595, 274), (594, 274), (593, 274), (592, 274), (591, 274), (590, 274), (589, 274), (588, 274), (587, 274), (586, 274), (585, 274), (584, 274), (583, 274), (582, 274), (581, 274), (580, 274), (579, 274), (578, 274), (577, 274), (576, 274), (575, 274), (574, 274), (573, 274), (572, 274), (571, 274), (570, 274), (569, 274), (568, 274), (567, 274), (566, 274), (565, 274), (564, 274), (563, 274), (562, 274), (561, 274), (560, 274), (559, 274), (558, 274), (557, 274), (556, 275), (555, 276), (554, 276), (553, 276), (552, 276), (551, 276), (550, 276), (549, 276), (548, 276), (547, 276), (546, 276), (545, 276), (544, 276), (543, 276), (542, 276), (541, 276), (540, 276), (539, 276), (538, 276), (537, 276), (536, 276), (535, 276), (534, 276), (533, 276), (532, 276), (531, 276), (530, 276), (529, 276), (528, 276), (527, 276), (526, 276), (525, 276), (524, 276), (523, 276), (522, 276), (521, 276), (520, 276), (519, 276), (518, 276), (517, 276), (516, 276), (515, 276), (514, 276), (513, 276), (512, 276), (511, 276), (510, 276), (509, 276), (508, 276), (507, 276), (506, 276), (505, 276), (504, 276), (503, 276), (502, 276), (501, 276), (500, 276), (499, 276), (498, 276), (497, 276), (496, 276), (495, 276), (494, 277), (493, 278), (492, 279), (491, 280), (490, 281), (489, 282), (488, 283), (487, 284), (486, 285), (485, 286), (484, 286), (483, 286), (482, 286), (481, 286), (480, 286), (479, 286), (478, 286), (477, 286), (476, 286), (475, 286), (474, 286), (473, 286), (472, 286), (471, 286), (470, 286), (469, 286), (468, 286), (467, 286), (466, 286), (465, 286), (464, 286), (463, 286), (462, 286), (461, 286), (460, 286), (459, 286), (458, 286), (457, 286), (456, 286), (455, 286), (454, 286), (453, 286), (452, 286), (451, 286), (450, 286), (449, 286), (448, 286), (447, 286), (446, 286), (445, 286), (444, 285), (443, 284), (442, 283), (441, 282), (440, 281), (439, 280), (438, 279), (437, 278), (436, 277), (435, 276), (434, 275), (433, 274), (432, 273), (431, 272), (430, 271), (429, 270), (428, 269), (427, 268), (426, 267), (426, 266), (426, 265), (426, 264), (426, 263), (426, 262), (426, 261), (426, 260), (426, 259), (426, 258), (426, 257), (426, 256), (426, 255), (426, 254), (426, 253), (426, 252), (426, 251), (426, 250), (426, 249), (426, 248), (426, 247), (426, 246), (426, 245), (426, 244), (426, 243), (426, 242), (426, 241), (426, 240), (426, 239), (426, 238), (426, 237), (426, 236), (426, 235), (425, 234), (424, 233), (423, 232), (422, 231), (421, 230), (420, 229), (419, 228), (418, 227), (417, 226), (416, 225), (416, 224), (416, 223), (416, 222), (416, 221), (416, 220), (416, 219), (416, 218), (416, 217), (416, 216), (416, 215), (416, 214), (416, 213), (416, 212), (416, 211), (416, 210), (416, 209), (416, 208), (416, 207), (416, 206), (416, 205), (416, 204), (416, 203), (416, 202), (416, 201), (416, 200), (416, 199), (416, 198), (416, 197), (416, 196), (416, 195), (416, 194), (416, 193), (416, 192), (416, 191), (416, 190), (416, 189), (416, 188), (416, 187), (416, 186), (416, 185), (415, 184), (414, 183), (413, 182), (412, 181), (411, 180), (410, 179), (409, 178), (408, 177), (407, 176), (406, 175), (405, 174), (404, 174), (403, 174), (402, 174), (401, 174), (400, 174), (399, 174), (398, 174), (397, 174), (396, 174), (395, 174), (394, 174), (393, 174), (392, 174), (391, 174), (390, 174), (389, 174), (388, 174), (387, 174), (386, 174), (385, 174), (384, 174), (383, 174), (382, 174), (381, 174), (380, 174), (379, 174), (378, 174), (377, 174), (376, 174), (375, 174), (374, 174), (373, 174), (372, 174), (371, 174), (370, 174), (369, 174), (368, 174), (367, 174), (366, 174), (365, 174), (364, 174), (363, 174), (362, 174), (361, 174), (360, 174), (359, 174), (358, 174), (357, 174), (356, 174), (355, 174), (354, 174), (353, 174), (352, 174), (351, 174), (350, 174), (349, 174), (348, 174), (347, 174), (346, 174), (345, 174), (344, 174), (343, 174), (342, 174), (341, 174), (340, 174), (339, 174), (338, 174), (337, 174), (336, 174), (335, 174), (334, 174), (333, 174), (332, 174), (331, 174), (330, 174), (329, 174), (328, 174), (327, 174), (326, 174), (325, 174), (324, 174), (323, 174), (322, 174), (321, 174), (320, 174), (319, 174), (318, 174), (317, 174), (316, 175), (315, 176), (314, 176), (313, 176), (312, 176), (311, 176), (310, 176), (309, 176), (308, 176), (307, 176), (306, 176), (305, 176), (304, 176), (303, 176), (302, 176), (301, 176), (300, 176), (299, 176), (298, 176), (297, 176), (296, 176), (295, 176), (294, 176), (293, 176), (292, 176), (291, 176), (290, 176), (289, 176), (288, 176), (287, 176), (286, 176), (285, 176), (284, 175), (283, 174), (282, 173), (281, 172), (280, 171), (279, 170), (278, 169), (277, 168), (276, 167), (276, 166), (276, 165), (276, 164), (276, 163), (276, 162), (276, 161), (276, 160), (276, 159), (276, 158), (276, 157), (276, 156), (276, 155), (276, 154), (276, 153), (276, 152), (276, 151), (276, 150), (276, 149), (276, 148), (276, 147), (276, 146), (276, 145), (276, 144), (276, 143), (276, 142), (276, 141), (276, 140), (276, 139), (276, 138), (276, 137), (276, 136), (276, 135), (275, 134), (274, 133), (273, 132), (272, 131), (271, 130), (270, 129), (269, 128), (268, 127), (267, 126), (266, 125), (266, 124), (266, 123), (266, 122), (266, 121), (266, 120), (266, 119), (266, 118), (266, 117), (266, 116), (266, 115), (266, 114), (266, 113), (266, 112), (266, 111), (266, 110), (266, 109), (266, 108), (266, 107), (266, 106), (266, 105), (266, 104), (266, 103), (266, 102), (266, 101), (266, 100), (266, 99), (266, 98), (266, 97), (266, 96), (266, 95), (266, 94), (266, 93), (266, 92), (266, 91), (266, 90), (266, 89), (266, 88), (266, 87), (266, 86), (266, 85), (266, 84), (266, 83), (266, 82), (266, 81), (266, 80), (266, 79), (266, 78), (266, 77), (266, 76), (266, 75), (265, 74), (264, 73), (263, 72), (262, 71), (261, 70), (260, 69), (259, 68), (258, 67), (257, 66), (256, 65), (255, 64), (254, 64), (253, 64), (252, 64), (251, 64), (250, 64), (249, 64), (248, 64), (247, 64), (246, 64), (245, 64), (244, 64), (243, 64), (242, 64), (241, 64), (240, 64), (239, 64), (238, 64), (237, 64), (236, 64), (235, 64), (234, 64), (233, 64), (232, 64), (231, 64), (230, 64), (229, 64), (228, 64), (227, 64), (226, 64), (225, 64), (224, 64), (223, 64), (222, 64), (221, 64), (220, 64), (219, 64), (218, 64), (217, 64), (216, 64), (215, 64), (214, 64), (213, 64), (212, 64), (211, 64), (210, 64), (209, 64), (208, 64), (207, 64), (206, 64), (205, 64), (204, 64), (203, 64), (202, 64), (201, 64), (200, 64), (199, 64), (198, 64), (197, 64), (196, 64), (195, 64), (194, 64), (193, 64), (192, 64), (191, 64), (190, 64), (189, 64), (188, 64), (187, 64), (186, 64), (185, 65), (184, 65), (183, 66), (182, 66), (181, 67), (180, 67), (179, 68), (178, 68), (177, 69), (176, 69)]

def test_pruning(prune_func: callable):
    print("Running pruning test cases")
    print(len(prune_func(path_0)) == 2)
    print(len(prune_func(path_1)) == 3)
    print(len(prune_func(path_2)) == 5)
    print(len(prune_func(path_3)) == 3)
    print(len(prune_func(path_4)) == 5)
    print(len(prune_func(path_5)) == 3)
    print(len(prune_func(path_6)) == 2)

    print("Recursive test cases")
    p = prune_func(test_0)
    print(len(p) == len(prune_func(p)))
    p = prune_func(test_1)
    print(len(p) == len(prune_func(p)))

def time_pruning(prune_func: callable, n: int = 1000):
    start = time.time()
    for i in range(n):
        pruned_path = prune_func(test_1)
    print('Time to prune: {0} seconds'.format(time.time() - start))

def profile_pruning(prune_func: callable, n: int = 1000):
    import cProfile

    with cProfile.Profile() as pr:
        for i in range(n):
            pruned_path = prune_func(test_1)
    pr.print_stats()